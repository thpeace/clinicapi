# ===========================================
# Database Configuration (values from Vault)
# ===========================================
spring.datasource.url=${dbUrl}
spring.datasource.username=${dbUsername}
spring.datasource.password=${dbPassword}

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# ===========================================
# Spring Cloud Vault Configuration
# ===========================================
# Import secrets from Vault at startup
spring.config.import=vault://secret/clinic

# Vault server connection
spring.cloud.vault.uri=http://10.10.0.154:8200

# Authentication (Token-based)
spring.cloud.vault.authentication=TOKEN
spring.cloud.vault.token=myroot

# KV Secrets Engine v2
spring.cloud.vault.kv.enabled=true
spring.cloud.vault.kv.backend=secret
spring.cloud.vault.kv.default-context=clinic
spring.cloud.vault.kv.profile-separator=/

# ===========================================
# JWT Configuration (secret from Vault)
# ===========================================
jwt.secret=${jwtSecret}
jwt.expiration=1800000

# ===========================================
# Account Lockout Configuration
# ===========================================
security.lockout.max-attempts=${maxAttempts}
security.lockout.duration-minutes=${durationMinutes}


# ===========================================
# Production Configuration Overrides
# ===========================================

# Database: Validate schema only, do not update
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false

# Logging: Reduced verbosity
logging.level.org.springframework.cloud.vault=INFO
logging.level.org.springframework.vault=INFO
logging.level.org.springframework.boot.context.config=INFO
logging.level.com.clinic=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO

# CORS Configuration (UPDATE THIS FOR ACTUAL PRODUCTION)
app.cors.allowed-origins=http://10.10.0.154:80
